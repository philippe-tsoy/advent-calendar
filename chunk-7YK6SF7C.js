import{c as X}from"./chunk-MIAOFITL.js";import{a as J}from"./chunk-SK2CRI2C.js";import{$ as j,$a as h,Aa as c,Cb as Z,Ea as U,Fa as x,Ga as m,Ha as V,K as E,La as H,M as F,Na as M,O as S,Oa as A,Pa as L,Q as y,Qa as $,Ra as W,Sa as p,Ta as s,Ua as o,V as R,Va as q,W as T,Za as z,a as N,b as k,bb as _,da as f,ga as C,ia as b,ib as a,jb as O,kb as I,lb as P,pa as G,ra as u,ub as Y,xa as B,za as D}from"./chunk-L7WXYAWM.js";var ue=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,t){this._renderer=e,this._elementRef=t}setProperty(e,t){this._renderer.setProperty(this._elementRef.nativeElement,e,t)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(t){return new(t||n)(c(D),c(b))};static \u0275dir=m({type:n})}return n})(),Q=(()=>{class n extends ue{static \u0275fac=(()=>{let e;return function(r){return(e||(e=C(n)))(r||n)}})();static \u0275dir=m({type:n,features:[V]})}return n})(),ee=new S("");var ce={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Ye=k(N({},ce),{"[class.ng-submitted]":"isSubmitted"});var he=new S("",{providedIn:"root",factory:()=>te}),te="always";var fe={provide:ee,useExisting:E(()=>ie),multi:!0};function ne(n,i){return n==null?`${i}`:(i&&typeof i=="object"&&(i="Object"),`${n}: ${i}`.slice(0,50))}function ge(n){return n.split(":")[0]}var ie=(()=>{class n extends Q{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;appRefInjector=y(H).injector;destroyRef=y(j);cdr=y(Y);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,B({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(e){this.cdr.markForCheck(),this.value=e;let t=this._getOptionId(e),r=ne(t,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=t=>{this.value=this._getOptionValue(t),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let t of this._optionMap.keys())if(this._compareWith(this._optionMap.get(t),e))return t;return null}_getOptionValue(e){let t=ge(e);return this._optionMap.has(t)?this._optionMap.get(t):e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=C(n)))(r||n)}})();static \u0275dir=m({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){t&1&&h("change",function(d){return r.onChange(d.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[P([fe]),V]})}return n})(),re=(()=>{class n{_element;_renderer;_select;id;constructor(e,t,r){this._element=e,this._renderer=t,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(ne(this.id,e)),this._select._writeValueAfterRender())}set value(e){this._setElementValue(e),this._select&&this._select._writeValueAfterRender()}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(t){return new(t||n)(c(b),c(D),c(ie,9))};static \u0275dir=m({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),me={provide:ee,useExisting:E(()=>oe),multi:!0};function K(n,i){return n==null?`${i}`:(typeof i=="string"&&(i=`'${i}'`),i&&typeof i=="object"&&(i="Object"),`${n}: ${i}`.slice(0,50))}function pe(n){return n.split(":")[0]}var oe=(()=>{class n extends Q{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let t;if(Array.isArray(e)){let r=e.map(l=>this._getOptionId(l));t=(l,d)=>{l._setSelected(r.indexOf(d.toString())>-1)}}else t=(r,l)=>{r._setSelected(!1)};this._optionMap.forEach(t)}registerOnChange(e){this.onChange=t=>{let r=[],l=t.selectedOptions;if(l!==void 0){let d=l;for(let g=0;g<d.length;g++){let v=d[g],w=this._getOptionValue(v.value);r.push(w)}}else{let d=t.options;for(let g=0;g<d.length;g++){let v=d[g];if(v.selected){let w=this._getOptionValue(v.value);r.push(w)}}}this.value=r,e(r)}}_registerOption(e){let t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}_getOptionId(e){for(let t of this._optionMap.keys())if(this._compareWith(this._optionMap.get(t)._value,e))return t;return null}_getOptionValue(e){let t=pe(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=C(n)))(r||n)}})();static \u0275dir=m({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){t&1&&h("change",function(d){return r.onChange(d.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[P([me]),V]})}return n})(),se=(()=>{class n{_element;_renderer;_select;id;_value;constructor(e,t,r){this._element=e,this._renderer=t,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(K(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(K(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(t){return new(t||n)(c(b),c(D),c(oe,9))};static \u0275dir=m({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var _e=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=x({type:n});static \u0275inj=F({})}return n})();var ae=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:he,useValue:e.callSetDisabledState??te}]}}static \u0275fac=function(t){return new(t||n)};static \u0275mod=x({type:n});static \u0275inj=F({imports:[_e]})}return n})();function ye(n,i){if(n&1&&(s(0,"option",8),a(1),o()),n&2){let e=i.$implicit;p("value",e),u(),I("Day ",e)}}function Ce(n,i){if(n&1){let e=z();s(0,"div",14),q(1,"img",23),s(2,"button",24),h("click",function(){R(e);let r=_();return T(r.clearImage())}),a(3,"Remove Image"),o()()}if(n&2){let e=_();u(),p("src",e.imagePreview(),G)}}function be(n,i){n&1&&(s(0,"div",15),a(1,"No image selected"),o())}function De(n,i){if(n&1&&(s(0,"div",19),a(1),o()),n&2){let e=_();u(),O(e.successMessage())}}function Ve(n,i){if(n&1&&(s(0,"div",20),a(1),o()),n&2){let e=_();u(),O(e.errorMessage())}}var le=class n{constructor(i){this.calendarDataService=i}selectedDay=f(1);message=f("");imageFile=f(null);imagePreview=f("");successMessage=f("");errorMessage=f("");days=Array.from({length:32},(i,e)=>e+1);ngOnInit(){this.loadDayData(1)}onDayChange(i){this.selectedDay.set(i),this.loadDayData(i),this.clearMessages()}onFileSelected(i){let t=i.target.files?.[0];if(!t)return;if(!t.type.startsWith("image/")){this.errorMessage.set("Please select an image file");return}if(t.size>5*1024*1024){this.errorMessage.set("Image size must be less than 5MB");return}this.imageFile.set(t),this.errorMessage.set("");let r=new FileReader;r.onload=l=>{let d=l.target?.result;this.imagePreview.set(d)},r.readAsDataURL(t)}loadDayData(i){let e=this.calendarDataService.getDayData(i);this.message.set(e.message);let t=this.calendarDataService.getImageUrl(e);t&&t.startsWith("data:")?this.imagePreview.set(t):t?this.imagePreview.set(t):this.imagePreview.set(""),this.imageFile.set(null)}save(){let i=this.selectedDay(),e=this.message().trim();if(!e){this.errorMessage.set("Please enter a message");return}let t={day:i,display:this.calendarDataService.getDayData(i).display,message:e,imagePath:"",imageData:this.imagePreview()&&this.imagePreview().startsWith("data:")?this.imagePreview():void 0};try{this.calendarDataService.saveDayData(t),this.successMessage.set(`Day ${i} saved successfully!`),this.errorMessage.set(""),window.dispatchEvent(new Event("calendar-data-updated")),setTimeout(()=>this.successMessage.set(""),3e3)}catch{this.errorMessage.set("Failed to save. Please try again.")}}delete(){let i=this.selectedDay();confirm(`Are you sure you want to delete custom data for Day ${i}? This will restore the default.`)&&(this.calendarDataService.deleteDayData(i),this.loadDayData(i),this.successMessage.set(`Day ${i} restored to default!`),this.errorMessage.set(""),window.dispatchEvent(new Event("calendar-data-updated")),setTimeout(()=>this.successMessage.set(""),3e3))}clearImage(){this.imageFile.set(null),this.imagePreview.set(""),this.loadDayData(this.selectedDay())}clearMessages(){this.successMessage.set(""),this.errorMessage.set("")}static \u0275fac=function(e){return new(e||n)(c(J))};static \u0275cmp=U({type:n,selectors:[["app-admin"]],decls:50,vars:6,consts:[[1,"admin-container"],[1,"admin-header"],["routerLink","/",1,"back-link"],[1,"admin-content"],[1,"form-section"],[1,"form-group"],["for","day-select"],["id","day-select",1,"day-select",3,"change","value"],[3,"value"],["for","message-input"],["id","message-input","rows","4","placeholder","Enter a message for this day...",1,"message-input",3,"input","value"],["for","image-input"],[1,"image-upload-section"],["type","file","id","image-input","accept","image/*",1,"file-input",3,"change"],[1,"image-preview-container"],[1,"no-image"],[1,"form-actions"],["type","button",1,"save-btn",3,"click"],["type","button",1,"delete-btn",3,"click"],[1,"message","success"],[1,"message","error"],[1,"info-section"],[1,"note"],["alt","Preview",1,"image-preview",3,"src"],["type","button",1,"clear-image-btn",3,"click"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"div",1)(2,"h1"),a(3,"\u{1F384} Calendar Admin"),o(),s(4,"a",2),a(5,"\u2190 Back to Calendar"),o()(),s(6,"div",3)(7,"div",4)(8,"div",5)(9,"label",6),a(10,"Select Day:"),o(),s(11,"select",7),h("change",function(l){return t.onDayChange(+l.target.value)}),$(12,ye,2,2,"option",8,L),o()(),s(14,"div",5)(15,"label",9),a(16,"Message:"),o(),s(17,"textarea",10),h("input",function(l){return t.message.set(l.target.value)}),o()(),s(18,"div",5)(19,"label",11),a(20,"Image:"),o(),s(21,"div",12)(22,"input",13),h("change",function(l){return t.onFileSelected(l)}),o(),M(23,Ce,4,1,"div",14)(24,be,2,0,"div",15),o()(),s(25,"div",16)(26,"button",17),h("click",function(){return t.save()}),a(27),o(),s(28,"button",18),h("click",function(){return t.delete()}),a(29,"Restore Default"),o()(),M(30,De,2,1,"div",19),M(31,Ve,2,1,"div",20),o(),s(32,"div",21)(33,"h2"),a(34,"Instructions"),o(),s(35,"ul")(36,"li"),a(37,"Select a day from the dropdown (1-32)"),o(),s(38,"li"),a(39,"Enter a custom message for that day"),o(),s(40,"li"),a(41,"Upload an image (JPG, PNG, etc. - max 5MB)"),o(),s(42,"li"),a(43,'Click "Save" to store your changes'),o(),s(44,"li"),a(45,'Click "Restore Default" to remove custom data'),o()(),s(46,"p",22)(47,"strong"),a(48,"Note:"),o(),a(49," Images are stored in your browser's localStorage. Custom data will persist until you clear your browser data or restore defaults. "),o()()()()),e&2&&(u(11),p("value",t.selectedDay()),u(),W(t.days),u(5),p("value",t.message()),u(6),A(t.imagePreview()?23:24),u(4),I("Save Day ",t.selectedDay()),u(3),A(t.successMessage()?30:-1),u(),A(t.errorMessage()?31:-1))},dependencies:[Z,ae,re,se,X],styles:['@charset "UTF-8";.admin-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:2rem 1rem}.admin-header[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto 2rem;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem}.admin-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;margin:0;text-shadow:2px 2px 4px rgba(0,0,0,.3)}.admin-header[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:1.1rem;padding:.5rem 1rem;background:#fff3;border-radius:8px;transition:all .3s ease;border:2px solid rgba(255,255,255,.3)}.admin-header[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:translate(-3px)}.admin-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;display:grid;grid-template-columns:1fr 1fr;gap:2rem}.form-section[_ngcontent-%COMP%]{background:#fff;border-radius:15px;padding:2rem;box-shadow:0 10px 30px #0000004d}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:600;color:#333;font-size:1rem}.day-select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:2px solid #e0e0e0;border-radius:8px;font-size:1rem;background:#fff;cursor:pointer;transition:border-color .3s ease}.day-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.message-input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:2px solid #e0e0e0;border-radius:8px;font-size:1rem;font-family:inherit;resize:vertical;transition:border-color .3s ease}.message-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.image-upload-section[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{width:100%;padding:.5rem;margin-bottom:1rem;border:2px dashed #e0e0e0;border-radius:8px;cursor:pointer;transition:border-color .3s ease}.image-upload-section[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]:hover{border-color:#667eea}.image-upload-section[_ngcontent-%COMP%]   .image-preview-container[_ngcontent-%COMP%]{position:relative;margin-top:1rem}.image-upload-section[_ngcontent-%COMP%]   .image-preview-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{width:100%;max-height:300px;object-fit:contain;border-radius:8px;border:2px solid #e0e0e0;background:#f5f5f5}.image-upload-section[_ngcontent-%COMP%]   .image-preview-container[_ngcontent-%COMP%]   .clear-image-btn[_ngcontent-%COMP%]{margin-top:.5rem;padding:.5rem 1rem;background:#ff6b6b;color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:.9rem;transition:background .3s ease}.image-upload-section[_ngcontent-%COMP%]   .image-preview-container[_ngcontent-%COMP%]   .clear-image-btn[_ngcontent-%COMP%]:hover{background:#ff5252}.image-upload-section[_ngcontent-%COMP%]   .no-image[_ngcontent-%COMP%]{padding:2rem;text-align:center;color:#999;border:2px dashed #e0e0e0;border-radius:8px;background:#f9f9f9}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:2rem}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:.75rem 1.5rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease}.form-actions[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.form-actions[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 5px 15px #667eea66}.form-actions[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.form-actions[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{background:#ff6b6b;color:#fff}.form-actions[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover{background:#ff5252;transform:translateY(-2px);box-shadow:0 5px 15px #ff6b6b66}.form-actions[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.message[_ngcontent-%COMP%]{margin-top:1rem;padding:.75rem 1rem;border-radius:8px;font-weight:500}.message.success[_ngcontent-%COMP%]{background:#d4edda;color:#155724;border:1px solid #c3e6cb}.message.error[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.info-section[_ngcontent-%COMP%]{background:#fffffff2;border-radius:15px;padding:2rem;box-shadow:0 10px 30px #0000004d}.info-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-top:0;margin-bottom:1rem}.info-section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0 0 1.5rem}.info-section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.5rem 0 .5rem 1.5rem;position:relative;color:#555}.info-section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"\\2713";position:absolute;left:0;color:#667eea;font-weight:700}.info-section[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{background:#fff3cd;border:1px solid #ffc107;border-radius:8px;padding:1rem;color:#856404;margin:0;font-size:.9rem;line-height:1.6}'],changeDetection:0})};export{le as AdminComponent};
